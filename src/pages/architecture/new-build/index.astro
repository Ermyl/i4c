---
import BaseLayout from "../../../layouts/BaseLayout.astro";
---

<BaseLayout>

<section class="max-w-5xl mx-auto px-4 py-0 bg-white">
  <div class="grid md:grid-cols-2 gap-y-0 md:gap-y-10 md:gap-x-10 items-start">

<!-- LEFT: TEXT -->
<div class="order-2 md:order-1 contents md:block md:pt-14">

  <!-- MOBILE: after Image 1 -->
  <div class="order-2 pt-0 mt-6 mb-6 md:mt-0 md:mb-0">
    <h1 class="text-2xl sm:text-2xl font-medium text-slate-900">
      New Build Residential Design – Porirua & Kapiti Coast
    </h1>

    <p class="mt-2 text-sm leading-relaxed text-slate-700">
      Based in Porirua, working across Tawa, Aotea, Whitby, Plimmerton and the Kapiti Coast.
    </p>
  </div>

  <!-- MOBILE: Contact block -->
  <div class="order-3 mt-0 mb-6 md:mt-4 md:mb-0">
    <div class="border border-slate-200 rounded-lg p-5 bg-white">

      <p class="text-sm text-slate-700">
        Discuss your new home before committing to design or build.
      </p>

      <div class="mt-3 text-sm text-slate-700 space-y-1">
        <p>
          Phone:
          <a href="tel:0273938361" class="underline font-medium">
            027 39 38 361
          </a>
        </p>
        <p>
          Email:
          <a href="mailto:info@i4c.co.nz" class="underline font-medium">
            info@i4c.co.nz
          </a>
        </p>
      </div>

      <a
        href="tel:0273938361"
        class="inline-block mt-4 px-6 py-3 border border-black rounded-lg text-sm font-medium hover:bg-black hover:text-white transition"
      >
        Call to Discuss
      </a>

    </div>
  </div>

  <!-- MOBILE: After Image 2 + Image 3 -->
  <div class="order-6 mt-4 md:mt-6 pb-10 md:pb-0">

    <p class="text-sm leading-relaxed text-slate-500">
      Residential architectural design delivered through a structured process grounded in site realities, planning clarity and construction logic — supporting strong design outcomes with practical delivery.
    </p>

    <div class="mt-8">
      <h2 class="text-lg font-medium text-slate-900">Approach</h2>

      <div class="mt-2 space-y-4 text-sm leading-relaxed text-slate-500">
        <p>
          Every project begins with a conversation — how you want to live, how the site performs, and the investment framework that supports the build. Design decisions evolve alongside cost understanding, not after it.
        </p>

        <p>
          Planning controls, access, services, site constraints and indicative construction range are reviewed early so the concept develops with clarity rather than assumption.
        </p>

        <p>
          Clients remain actively involved — reviewing options, understanding trade-offs, and making informed decisions through concept development, documentation and consent.
        </p>

        <p>
          Where required, engagement can continue during construction in a client-side advisory or coordination role through to completion and handover.
        </p>
      </div>
    </div>

  </div>

</div>



<!-- RIGHT: PANELS -->

    <div class="order-1 md:order-2 contents md:flex md:flex-col">

      <button
        type="button"
        data-img="/architecture.jpg"
        data-img2="/dow-interior.jpg"
        data-title="New Build"
        class="order-1 md:order-none relative group w-full aspect-square md:aspect-[4/3] overflow-hidden block text-left"
      >
        <img src="/architecture.jpg" alt="New Build" class="absolute inset-0 w-full h-full object-cover" />
        <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent"></div>
        <div class="absolute top-6 left-6">
          <h2 class="text-white text-2xl font-bold tracking-wide">Dow-Leblanc</h2>
        </div>
      </button>

      <button
  type="button"
  data-img="/oconnor.jpg"
  data-img2="/oconnor2.jpg"
  data-title="O'Connor"
  class="order-4 md:order-none relative group w-full aspect-square md:aspect-[4/3] overflow-hidden block text-left"
>

        <img src="/oconnor.jpg" alt="Renovation" class="absolute inset-0 w-full h-full object-cover" />
        <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent"></div>
        <div class="absolute top-6 left-6">
          <h2 class="text-white text-2xl font-bold tracking-wide">O'Connor</h2>
        </div>
      </button>

      <button
        type="button"
        data-img="/matatua4.jpg"
        data-img2="/matatua-side.jpg"
        data-title="Matatua house - Built"
        class="order-5 md:order-none relative group w-full aspect-square md:aspect-[4/3] overflow-hidden block text-left"
      >
        <img src="/matatua4.jpg" alt="Kapiti" class="absolute inset-0 w-full h-full object-cover" />
        <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent"></div>
        <div class="absolute top-6 left-6">
          <h2 class="text-white text-2xl font-bold tracking-wide">Matatua House</h2>
        </div>
      </button>

    </div>

  </div>
</section>


<!-- MODAL -->
<div id="img-modal" class="hidden fixed inset-0 z-[999]">
  <div id="img-backdrop" class="absolute inset-0 bg-black/80"></div>

  <div class="relative h-full w-full flex items-center justify-center p-6">
    <div id="img-modal-inner" class="relative w-full max-w-6xl">


      <button
        id="img-close"
        class="absolute -top-10 right-0 text-white text-sm px-3 py-2 border border-white/30 rounded-lg"
      >
        Close
      </button>

      <!-- IMAGE GRID -->
<div id="img-modal-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
  <img
    id="img-modal-src"
    src=""
    alt=""
    class="w-full max-h-[85vh] object-contain bg-black"
  />
  <img
    id="img-modal-src2"
    src=""
    alt=""
    class="w-full max-h-[85vh] object-contain bg-black hidden"
  />
</div>


      <div
        id="img-modal-title"
        class="mt-3 text-white text-sm opacity-90"
      ></div>

    </div>
  </div>
</div>


<script is:inline>
  const modal = document.getElementById("img-modal");
  const backdrop = document.getElementById("img-backdrop");
  const closeBtn = document.getElementById("img-close");

  const grid = document.getElementById("img-modal-grid");
  const img1 = document.getElementById("img-modal-src");
  const img2 = document.getElementById("img-modal-src2");
  const titleEl = document.getElementById("img-modal-title");

  function openModal(src1, src2, title) {
    img1.src = src1 || "";
    img1.alt = title || "";

    if (src2) {
      img2.src = src2;
      img2.alt = title || "";
      img2.classList.remove("hidden");
      grid.classList.add("md:grid-cols-2");
      grid.classList.remove("md:grid-cols-1");
    } else {
      img2.src = "";
      img2.classList.add("hidden");
      grid.classList.add("md:grid-cols-1");
      grid.classList.remove("md:grid-cols-2");
    }

    titleEl.textContent = title || "";
    modal.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }

  function closeModal() {
    modal.classList.add("hidden");
    img1.src = "";
    img2.src = "";
    img2.classList.add("hidden");
    document.body.style.overflow = "";
  }

  document.querySelectorAll("[data-img]").forEach((el) => {
    el.addEventListener("click", () => {
      openModal(el.dataset.img, el.dataset.img2, el.dataset.title);
    });
  });

  backdrop.addEventListener("click", closeModal);
  closeBtn.addEventListener("click", closeModal);

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && !modal.classList.contains("hidden")) closeModal();
  });
</script>




</BaseLayout>
