---
import BaseLayout from "../../../layouts/BaseLayout.astro";
---

<BaseLayout>

 <!-- ================= MAIN PANELS ================= -->
  <section class="max-w-7xl mx-auto px-6">
    <div class="grid md:grid-cols-3">

      <!-- Kaituna -->
<button type="button"
  class="relative group aspect-[1/1] overflow-hidden text-left"
  data-img="/kaituna.jpg"
  data-title="Kaituna Apartments"
>
  <img src="/kaituna.jpg" alt="Kaituna" class="absolute inset-0 w-full h-full object-cover" />
  <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent"></div>
  <div class="absolute top-6 left-6 md:top-10 md:left-10">
    <h2 class="text-white text-2xl md:text-3xl font-bold tracking-wide">Kaituna Apartments</h2>
  </div>
</button>


<!-- Lowe Street -->
<button type="button"
  class="relative group aspect-[1/1] overflow-hidden text-left"
  data-img="/lowe street 2.jpg"
  data-img2="/lowe street.jpg"
  data-title="Lowe Street Apartments Conversion"
>
  <img src="/lowe street 2.jpg" alt="Lowe Street" class="absolute inset-0 w-full h-full object-cover" />
  <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent"></div>
  <div class="absolute top-6 left-6 md:top-10 md:left-10">
    <h2 class="text-white text-2xl md:text-3xl font-bold tracking-wide">Lowe Street Conversion</h2>
  </div>
</button>

<!-- Hill Street -->
<button type="button"
  class="relative group aspect-[1/1] overflow-hidden text-left"
  data-img="/hill street.jpg"
  data-title="Hill Street Apartments"
>
  <img src="/hill street.jpg" alt="Hill Street" class="absolute inset-0 w-full h-full object-cover" />
  <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent"></div>
  <div class="absolute top-6 left-6 md:top-10 md:left-10">
    <h2 class="text-white text-2xl md:text-3xl font-bold tracking-wide">Hill Street Appartments</h2>
  </div>
</button>



    </div>
  </section>

 <!-- MODAL -->
<div id="img-modal" class="hidden fixed inset-0 z-[999]">
  <div id="img-backdrop" class="absolute inset-0 bg-black/80"></div>

  <div class="relative h-full w-full flex items-center justify-center p-6">
    <div id="img-modal-inner" class="relative w-full max-w-6xl">


      <button
        id="img-close"
        class="absolute -top-10 right-0 text-white text-sm px-3 py-2 border border-white/30 rounded-lg"
      >
        Close
      </button>

      <!-- IMAGE GRID -->
<div id="img-modal-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
  <img
    id="img-modal-src"
    src=""
    alt=""
    class="w-full max-h-[85vh] object-contain bg-black"
  />
  <img
    id="img-modal-src2"
    src=""
    alt=""
    class="w-full max-h-[85vh] object-contain bg-black hidden"
  />
</div>


      <div
        id="img-modal-title"
        class="mt-3 text-white text-sm opacity-90"
      ></div>

    </div>
  </div>
</div>


<script is:inline>
  const modal = document.getElementById("img-modal");
  const backdrop = document.getElementById("img-backdrop");
  const closeBtn = document.getElementById("img-close");

  const grid = document.getElementById("img-modal-grid");
  const img1 = document.getElementById("img-modal-src");
  const img2 = document.getElementById("img-modal-src2");
  const titleEl = document.getElementById("img-modal-title");

  function openModal(src1, src2, title) {
    img1.src = src1 || "";
    img1.alt = title || "";

    if (src2) {
      img2.src = src2;
      img2.alt = title || "";
      img2.classList.remove("hidden");
      grid.classList.add("md:grid-cols-2");
      grid.classList.remove("md:grid-cols-1");
    } else {
      img2.src = "";
      img2.classList.add("hidden");
      grid.classList.add("md:grid-cols-1");
      grid.classList.remove("md:grid-cols-2");
    }

    titleEl.textContent = title || "";
    modal.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }

  function closeModal() {
    modal.classList.add("hidden");
    img1.src = "";
    img2.src = "";
    img2.classList.add("hidden");
    document.body.style.overflow = "";
  }

  document.querySelectorAll("[data-img]").forEach((el) => {
    el.addEventListener("click", () => {
      openModal(el.dataset.img, el.dataset.img2, el.dataset.title);
    });
  });

  backdrop.addEventListener("click", closeModal);
  closeBtn.addEventListener("click", closeModal);

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && !modal.classList.contains("hidden")) closeModal();
  });
</script>



</BaseLayout>