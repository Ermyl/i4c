---
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import "../styles/global.css";
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>i4c | Architecture & Development</title>

  <meta name="deploy-check" content="baseLayout-2026-02-16-v1" />

    <meta name="description" content="Architecture and development across residential and commercial projects." />

    <!-- Open Graph -->
    <meta property="og:title" content="i4c | Architecture & Development" />
    <meta property="og:description" content="Architecture and development across residential and commercial projects." />
    <meta property="og:image" content="https://i4c.co.nz/og-image.jpg" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://i4c.co.nz/" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png" />

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17960810296"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-17960810296');
</script>

  </head>

  <body>
    <Header />

    <main>
      <slot />
    </main>

    <!-- Smart Back Button -->
<button
  id="smartBack"
  aria-label="Back"
  style="
    position: fixed;
    right: 18px;
    bottom: 18px;
    z-index: 9999;
    width: 40px;
    height: 40px;
    padding: 0;
    border: none;
    border-radius: 50%;
    background: rgba(0, 0, 0, 0.5);
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    display: none;
  "
>
  <svg
    viewBox="0 0 24 24"
    width="35"
    height="35"
    fill="none"
    stroke="white"
    stroke-width="3"
    stroke-linecap="butt"
    stroke-linejoin="miter"
    style="
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      display: block;
    "
  >
    <path d="M15 18 L8.5 12 L15 6" />
  </svg>
</button>



<script is:inline>
  (() => {
    const btn = document.getElementById("smartBack");
    if (!btn) return;

    const ref = document.referrer || "";
    const host = window.location.hostname;
    const isInternalReferrer = ref.includes(host);

    const isHome = window.location.pathname === "/";

    // Show on all non-home pages
    if (!isHome) btn.style.display = "block";


    btn.addEventListener("click", () => {
      if (isInternalReferrer) {
        window.history.back();
      } else {
        window.location.href = "/";
      }
    });
  })();
</script>



    <Footer />
  </body>
</html>
